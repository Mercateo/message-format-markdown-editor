<!doctype html>
<head>
  <meta charset="UTF-8">
	<title>MessageFormat Live Preview</title>

  <!--Messageformat-->
	<script src='bower_components/messageformat/messageformat.js'></script>
  <script src='messageFormatPreview.js'></script>
      <script src='bower_components/messageformat/locale/de.js'></script>
      <script src='bower_components/messageformat/locale/en.js'></script>
      <script src='bower_components/messageformat/locale/fr.js'></script>
  
  <!--Codemirror-->
	<script src="bower_components/codemirror/lib/codemirror.js"></script>
	<link href="bower_components/codemirror/lib/codemirror.css" rel="stylesheet">
  <script src="bower_components/codemirror/addon/edit/matchbrackets.js"></script>
  <script src="bower_components/codemirror/addon/edit/closebrackets.js"></script>
  <script src="messageformat.js"></script>
  <script src="bower_components/codemirror/addon/lint/lint.js"></script>
  <link href="bower_components/codemirror/addon/lint/lint.css" rel="stylesheet">
  <script src="bower_components/codemirror.messageformat/forgiving-messageformat-parser.js"></script>
  <script src="messageformat-lint.js"></script>
  
  <!--Markdown-->
  <script src="bower_components/marked/marked.min.js"></script>
  
  <!---jQuery & Bootstrap-->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">

  <style>
    body {
      min-width:1600px;
    }
    th {
      background-color: #666;
      box-shadow: 0px 0px 20px #999;
    }
    th:not(:first-child) {
      border-left: 1px solid white;
    }
    td {
      padding: 0px !important;
    }
    /* First column */
    td:first-child > .limit { 
      overflow: hidden;
      padding: 8px;
    }

    .comment {
      max-height: 90px;
      overflow-y: auto;
      margin: 8px;
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
    }
    .limit{
      overflow-y: auto;
      height: 192px;
      margin: 0px;
      padding: 0px;
      position: relative;
    }
    .preview > .well, .preview > .panel {
      margin: 20px;
    }
    .CodeMirror {
      height: 100%;
    }
    .CodeMirror-linenumber {
      visibility: hidden;
    }
    .actionButtons {
      position: absolute;
      top: 4px;
      left: 4px;
      z-index:5;
      width:24px;
    }
    .actionButtons > .btn-group > * {
      width: 22px;
      padding: 0px;
      margin: 2px;
    }    
    .btn-active-success.active {
      color: #fff;
      background-color: #449d44;
      border-color: #398439;
    }
    .btn-active-success.active:hover {
      color: #fff;
      background-color: #398439;
      border-color: #255625;
    }
    .btn-default.nohover:hover {
      color: #333;
      background-color: #fff;
      border-color: #ccc;
    }
    .btn-default.nohover.active:hover {
      color: #333;
      background-color: #e6e6e6;
      border-color: #adadad;
    }
  </style>
</head>
<body>
  <form action="/" method="POST">
    <table class='table fixedHeader' style="table-layout:fixed;position:fixed;top:0px;z-index:101;min-width:2000px;"><thead>
      <tr>
        <th class='text-center' style='border-bottom:none;'>
          <div style='float:left;'>
            <input type='submit' class='btn btn-default' value='Speichern'></input>
            <button class='btn btn-default' id='close'>Schließen</button>
          </div>
          <div style='float:right;'>
            <button class='btn btn-default' id='showAll'>Alle einblenden</button>
            <div class="btn-group" id='toggleAll'> 
              <a class="btn btn-default nohover code active">Code</a>
              <a class="btn btn-default nohover test">Test</a>
            </div>          
          </div>
        </th>
                  <th class='text-center' style='border-bottom:none'>
            <span style='float:left; padding-right: 10px; color: white; font-size:24px;'>
              DE 
            </span>
            <div class="progress" style='margin:7px;'>
              <div class="progress-bar progress-bar-warning de" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%; min-width: 2em;">
            </div>
          </th>
                  <th class='text-center' style='border-bottom:none'>
            <span style='float:left; padding-right: 10px; color: white; font-size:24px;'>
              EN 
            </span>
            <div class="progress" style='margin:7px;'>
              <div class="progress-bar progress-bar-warning en" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:82%; min-width: 2em;">
            </div>
          </th>
                  <th class='text-center' style='border-bottom:none'>
            <span style='float:left; padding-right: 10px; color: white; font-size:24px;'>
              FR 
            </span>
            <div class="progress" style='margin:7px;'>
              <div class="progress-bar progress-bar-warning fr" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:96%; min-width: 2em;">
            </div>
          </th>
              </tr>
      </thead>
    </table>
    <table class='table table-bordered' style="table-layout:fixed;height:100%;margin-top:50px"><tbody>
              <tr data-editors='0'>
          <td>
            <div class='limit'>
              <h4 style='word-wrap: break-word;'>basket&shy.cluster&shy_badge&shy_description</h4>
              <h4 style='float:left;margin:0px'>
                <small>basket-strings</small>
              </h4>
              <div style='float:right;'>
                <button class='btn btn-xs btn-default hideThis'>Ausblenden</button>
                <div class="btn-group btn-toggle"> 
                  <a class="btn btn-xs btn-default nohover code active">Code</a>
                  <a class="btn btn-xs btn-default nohover test">Test</a>
                </div>
              </div>
              <pre class='well well-sm comment'>COLOR: [weiß|schwarz]</pre>
            </div>
          </td>
                      <td data-editor='0' data-locale='de'>
              <div class='limit editor'>
          	    <textarea name ='basket.cluster_badge_description[de]' class='de' style='width:100%;height:100%'>Ein Cluster enthält alle Artikel, die bestimmte Anforderungen erfüllen (z. B. Kopierpapier, DIN A4, 80 g/m², {COLOR}).


"Alt-T" öffnet die Vorschau</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                    </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 20.03.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='1' data-locale='en'>
              <div class='limit editor'>
          	    <textarea name ='basket.cluster_badge_description[en]' class='en' style='width:100%;height:100%'>A Cluster contains all items that fulfil certain requirements (e. g. copy paper, DIN A4, 80 g/m², 
{COLOR, select,
  weiß {white}
  other {black}
}).</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 20.03.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='2' data-locale='fr'>
              <div class='limit editor'>
          	    <textarea name ='basket.cluster_badge_description[fr]' class='fr' style='width:100%;height:100%'>Un cluster contient tous les produits répondant à des besoins spécifiques (papier pour imprimante, format A4, 80g/m2, 
{COLOR, select,
  weiß {blanc}
  other {noir}
}).</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 20.03.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                  </tr>
              <tr data-editors='3'>
          <td>
            <div class='limit'>
              <h4 style='word-wrap: break-word;'>basket&shy.commit&shy.general&shy_terms&shy_and&shy_privacy</h4>
              <h4 style='float:left;margin:0px'>
                <small>basket-strings</small>
              </h4>
              <div style='float:right;'>
                <button class='btn btn-xs btn-default hideThis'>Ausblenden</button>
                <div class="btn-group btn-toggle"> 
                  <a class="btn btn-xs btn-default nohover code active">Code</a>
                  <a class="btn btn-xs btn-default nohover test">Test</a>
                </div>
              </div>
              <pre class='well well-sm comment'>AGB_URL
DSE_LINK
DSE_LINK
DSE_LINK
DSE_LINK
DSE_LINK</pre>
            </div>
          </td>
                      <td data-editor='3' data-locale='de'>
              <div class='limit editor'>
          	    <textarea name ='basket.commit.general_terms_and_privacy[de]' class='de' style='width:100%;height:100%'>Ja, ich bestätige die [AGB]({AGB_URL}) und die [Datenschutzerklärung]({DSE_LINK}) der Mercateo AG.</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                    </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 21.04.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='4' data-locale='en'>
              <div class='limit editor'>
          	    <textarea name ='basket.commit.general_terms_and_privacy[en]' class='en' style='width:100%;height:100%'>Yes, I confirm the [General Terms and Conditions]({AGB_URL}) and the [data protection notice]({DSE_LINK}) of Mercateo</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 21.04.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='5' data-locale='fr'>
              <div class='limit editor'>
          	    <textarea name ='basket.commit.general_terms_and_privacy[fr]' class='fr' style='width:100%;height:100%'>Oui, j'accepte les [conditions générales de vente]({AGB_URL}) et la [déclaration de confidentialité]({DSE_LINK}) de Mercateo France SAS</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 21.04.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                  </tr>
              <tr data-editors='6'>
          <td>
            <div class='limit'>
              <h4 style='word-wrap: break-word;'>placedorder&shy.print&shy.hint&shy.printing&shy_guide</h4>
              <h4 style='float:left;margin:0px'>
                <small>basket-strings</small>
              </h4>
              <div style='float:right;'>
                <button class='btn btn-xs btn-default hideThis'>Ausblenden</button>
                <div class="btn-group btn-toggle"> 
                  <a class="btn btn-xs btn-default nohover code active">Code</a>
                  <a class="btn btn-xs btn-default nohover test">Test</a>
                </div>
              </div>
              <pre class='well well-sm comment'>OS: [mac|windows]</pre>
            </div>
          </td>
                      <td data-editor='6' data-locale='de'>
              <div class='limit editor'>
          	    <textarea name ='placedorder.print.hint.printing_guide[de]' class='de' style='width:100%;height:100%'>Sie können diese Seite ausdrucken, indem Sie die Druckfunktion Ihres Browsers verwenden ({OS, select, mac {CMD} other {STRG}}+P).</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                    </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 30.04.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='7' data-locale='en'>
              <div class='limit editor'>
          	    <textarea name ='placedorder.print.hint.printing_guide[en]' class='en' style='width:100%;height:100%'>You can print out this page by using the printing function of your browser ({OS, select, mac {CMD} other {STRG}}+P).</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 30.04.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='8' data-locale='fr'>
              <div class='limit editor'>
          	    <textarea name ='placedorder.print.hint.printing_guide[fr]' class='fr' style='width:100%;height:100%'></textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                  </tr>
              <tr data-editors='9'>
          <td>
            <div class='limit'>
              <h4 style='word-wrap: break-word;'>load&shy_productrow&shy;&shy.changed&shy_deliveryTime&shy;&shy.original&shy_deliveryTime&shy_was</h4>
              <h4 style='float:left;margin:0px'>
                <small>basket-strings</small>
              </h4>
              <div style='float:right;'>
                <button class='btn btn-xs btn-default hideThis'>Ausblenden</button>
                <div class="btn-group btn-toggle"> 
                  <a class="btn btn-xs btn-default nohover code active">Code</a>
                  <a class="btn btn-xs btn-default nohover test">Test</a>
                </div>
              </div>
              <pre class='well well-sm comment'>AGB_URL
DSE_LINK
DSE_LINK
DSE_LINK
DSE_LINK
DSE_LINK</pre>
            </div>
          </td>
                      <td data-editor='9' data-locale='de'>
              <div class='limit editor'>
          	    <textarea name ='load_productrow&shy;.changed_deliveryTime&shy;.original_deliveryTime_was[de]' class='de' style='width:100%;height:100%'>Lieferzeit&auml;nderung! Die urspr&uuml;ngliche Lieferzeit des gespeicherten Artikels war</textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                    </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                      <i class='fa fa-info-circle' style='padding:10px 8px;' data-toggle="tooltip" title="Letze Änderung am 16.05.13 von Robert Bastian" data-placement="top"></i>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='10' data-locale='en'>
              <div class='limit editor'>
          	    <textarea name ='load_productrow&shy;.changed_deliveryTime&shy;.original_deliveryTime_was[en]' class='en' style='width:100%;height:100%'></textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                      <td data-editor='11' data-locale='fr'>
              <div class='limit editor'>
          	    <textarea name ='load_productrow&shy;.changed_deliveryTime&shy;.original_deliveryTime_was[fr]' class='fr' style='width:100%;height:100%'></textarea>    
                <div class='actionButtons'>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default undo' data-toggle="tooltip" title="Rückgängig" data-placement="right">
                      <i class='fa fa-undo'></i>
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertPlural ' data-toggle="tooltip" title="Plural Syntax einfügen" data-placement="right">
                      P
                    </button> 
                  </div>
                  <br>
                  <div class='btn-group' data-toggle='buttons'>
                    <button class='btn btn-sm btn-default insertSelect' data-toggle="tooltip" title="Select Syntax einfügen" data-placement="right">
                      S
                    </button> 
                  </div>
                  <br>
                                                        <div class='btn-group' data-toggle='buttons'>
                      <button class='btn btn-sm btn-default copyGerman' data-toggle="tooltip" title="Deutsch&nbsp;übernehmen" data-placement="right">
                        <i class='fa fa-copy'></i>
                      </label> 
                    </div>
                    <br>
                                  </div>
                <div style='position:absolute; left:0px; bottom: 0px; z-index:5; color: #999;'>
                  <i class='fa fa-edit' style='padding:10px 8px; display:none' data-toggle="tooltip" title="Geändert" data-placement="top"></i>
                  <br>
                                  </div>
              </div>
              <div class='limit preview' style='display:none;'></div>
            </td>
                  </tr>
          </tbody></table>
    <div class='text-center'>
      <ul class="pagination pagination-sm">
        <li class=''>
          <a href="/9" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
                              <li><a href="/9">5</a></li>
                                        <li><a href="/9">6</a></li>
                                        <li><a href="/9">7</a></li>
                                        <li><a href="/9">8</a></li>
                                        <li><a href="/9">9</a></li>
                                        <li class='active'><a href="#">10</a>
                                        <li><a href="/9">11</a></li>
                                        <li><a href="/9">12</a></li>
                                        <li><a href="/9">13</a></li>
                                        <li><a href="/9">14</a></li>
                          <li class=''>
          <a href="/11" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </div>
  </form>
	<script type="text/javascript">
    var locales = ["de","en","fr"];
    var editorInstances;
    var changed = {}
    $(function(){

      editorInstances = $('textarea').map(function(index,ta){
        var ta = CodeMirror.fromTextArea(ta, {
          mode: "messageformat.js",
          lineNumbers: true,
          styleActiveLine: true,
          lint: true,
          lineWrapping: true,
          viewportMargin: Infinity,
          autoCloseBrackets: true,
          matchBrackets: true,
          extraKeys: {
            "Tab": false,
            "Alt-T": function(cm) {
              toggleTestForButton($(cm.getTextArea()).closest('tr').find('.btn-toggle'));
            }
          },

        });
        ta.on('changes',function(ta){
          var td = $(ta.getTextArea()).closest('td');
          var id = td.data('editor');
          if (ta.getValue() == ta.getTextArea().value){
            ta.markClean();
            td.find('.fa-edit').hide();
          }
          else {
            td.find('.fa-edit').show();
          }
          changed[id] = !ta.isClean()
          $('[type=submit]').removeClass('btn-default').removeClass('btn-warning')
          $('[type=submit]').addClass(needsSave() ? 'btn-warning' : 'btn-default')
        })
        return ta;
      });

      function needsSave(){
        var ns = false;
        for (var key in changed) {
          ns = ns || changed[key];
        }
        return ns;
      }

      $('[data-toggle="tooltip"]').tooltip({container: "body"});

      $('#toggleAll').click(function(){
        $(this).find('.btn').toggleClass('active');
        // These toggles are set differently
        var opp = $(this).find('.active').hasClass('test') ? 'code' : 'test';
        $('.btn-toggle').filter(function(i, e){ return $(e).find('.'+opp).hasClass('active'); }).each(function(i,e){ toggleTestForButton($(e)); });
      })

      $('.btn-toggle').click(function() {
        toggleTestForButton($(this));
      });

      function toggleTestForButton(btnToggle){
        btnToggle.find('.btn').toggleClass('active');  
        var row = btnToggle.closest('tr');
        var editors = row.find('.editor');
        var previews = row.find('.preview');
        if (btnToggle.find('.active').hasClass('test')){
          for (var i = 0; i < 3; i++)
            renderPreview(editorInstances[row.data('editors')+i].getValue(),previews[i],row.find('.comment').html(), locales[i]);
          $(editors).hide();
          $(previews).show();
        }
        else {
          $(editors).show();
          $(previews).hide();
        }
      }

      var renderPreview = function(from,to,comment, locale){
        try {

          var whitespace = from.replace(/\n\n\n/g,'<br/></br>').replace(/\n\n/g,'<br/>').replace(/\s+/g,' ');
          var renderer = new marked.Renderer();
          renderer.paragraph = function(string){return string.replace(/&#/g,'&\\#')+"<br/>\n"};
          var md = marked(whitespace,{renderer: renderer});
          // remove trailing <br/> 
          md = md.substring(0,md.length-6);
          var samples = generateSamples(locale,md,comment);
          $(to).html((samples.length == 0 || samples[0].match(/^\s*$/)) ? "" : "<div class='well well-sm'>"+samples.join("</div><div class='well well-sm'>")+"</div>");
        }
        catch (err){
          $(to).html('<div class="panel panel-danger"><div class="panel-heading">Fehler</div><div class="panel-body">'+err.message+'</div></div>')
        }
      }

      var otherProgress = {"de":[50,50],"en":[41,50],"fr":[48,50]};
      for (var i = 0; i < locales.length; i++){
        var total = 0, finished = 0;
        for (var j = i; j < editorInstances.length; j += locales.length){
          total += 1;
          // If contains text, consider done
          if (!editorInstances[j].getValue().match(/^\s*$/))
            finished += 1;
        }
        otherProgress[locales[i]][0] -= finished;
        otherProgress[locales[i]][1] -= total;
      }

      function update(){
        for (var i = 0; i < locales.length; i++){
          var total = otherProgress[locales[i]][1], finished = otherProgress[locales[i]][0];
          for (var j = i; j < editorInstances.length; j += locales.length){
            total += 1;
            // If contains text, consider done
            if (!editorInstances[j].getValue().match(/^\s*$/))
              finished += 1;
          }
          var pb = $('.progress-bar.'+locales[i]);
          pb.removeClass('progress-bar-success');
          pb.removeClass('progress-bar-warning');
          if (total == finished)
            pb.addClass('progress-bar-success');
          else
            pb.addClass('progress-bar-warning');
          pb.html(finished+'/'+total);
          pb.css('width',finished/total*100+'%');
        }
      }
      update();
      for (var i = 0; i < editorInstances.length; i++)
        editorInstances[i].on("blur",update);

      $('form').submit(function() {
        for (var i = 0; i < editorInstances.length; i++){
          // If changed, write the changes to the text area
          if (changed[i])
            editorInstances[i].getTextArea().value = editorInstances[i].getValue();
          // If not changed, remove text area's name so it's not submitted
          else 
            $(editorInstances[i].getTextArea()).removeAttr('name');
        }
        // Empty changed so we can leave page
        changed = {}
        return true;
     });

      $('.copyGerman').click(function(){
        var editor = $(this).closest('td').data('editor');
        var germanEditor = Math.floor(editor/3)*3;
        editorInstances[editor].setValue(editorInstances[germanEditor].getValue());
      });

      $('.undo').click(function(){
        var editor = $(this).closest('td').data('editor');
        editorInstances[editor].undo();
        update();
      });

      $('.insertPlural').click(function(){
        var editor = $(this).closest('td').data('editor');
        var locale = $(this).closest('td').data('locale');
        var cases;
        switch (locale){
          case 'pl':
            cases = ["one","few","many","other"]; break;
          case 'cs':; case 'sk':
            cases = ["one","few","other"]; break;
          case 'de':; case 'en':; case 'fr':; case 'it':; case 'nl':; case 'es':
            cases = ["one","other"]; break;
        }
        editorInstances[editor].focus();
        editorInstances[editor].replaceSelection("\n{VARIABLE, plural,\n  " + cases.join(" {}\n  ") + " {}\n}\n", "around");
        update();
        return false;
      })

      $('.insertSelect').click(function(){
        var editor = $(this).closest('td').data('editor');
        editorInstances[editor].focus();
        editorInstances[editor].replaceSelection("\n");
        editorInstances[editor].replaceSelection("{VARIABLE, select,\n  case1 {}\n  case2 {}\n  other {}\n}\n","around");
        update();
        return false;
      });

      window.onbeforeunload = function() {
          return needsSave() ? 'Sie haben nicht gespeicherte Änderungen!' : null;
      }

      $(window).scroll(function(){
        $('.fixedHeader').css('left',-window.pageXOffset)
      });

      $('.hideThis').click(function(){
        $(this).closest('tr').hide();
        return false;
      });

      $('#showAll').click(function(){
        $('tr').show();
        return false;
      });

      $('#close').click(function(){
        window.close();
        return false;
      });

    })
  </script>    
</body>
</html>